# 🏪 せどりトラッカー

> 店舗せどりの訪問記録・滞在時間・移動時間を管理するWebアプリです。

[![GitHub Pages](https://img.shields.io/badge/GitHub%20Pages-Live-brightgreen)](https://i-love-hamster.github.io/sedori-tracker/)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)

---

## 📱 デモ

**→ [アプリを開く](https://i-love-hamster.github.io/sedori-tracker/)**

> ※ スマホのブラウザ（Safari / Chrome）で開くことを推奨します

---

## ✨ 特徴

- **完全無料・広告なし** — データはあなたのスマホにのみ保存されます
- **サーバー不要** — HTMLファイル1枚で動作。データはすべてスマホ内（localStorage）に保存されます
- **GPS連動（任意）** — 現在地から近い店舗を距離順にソート。GPS未取得でも全機能が使えます
- **移動時間の可視化** — 総稼働時間と滞在時間の差分で移動・休憩時間を把握
- **店舗別の成長記録** — 滞在時間の推移グラフで効率化を実感
- **排他チェックイン** — 同時に複数店舗にチェックインできない仕組みで正確な滞在記録を実現

---

## 🚀 使い方

### 基本的な流れ

```
1. 店舗を登録する
2. 出発したら「店舗せどり開始」（タイマー起動）
3. 店舗に着いたら「チェックイン」
4. せどりが終わったら「チェックアウト」
5. 次の店舗へ移動 → チェックイン → チェックアウト（繰り返し）
6. 帰宅したら「店舗せどり終了」（タイマー停止）
```

---

### STEP 1 — 店舗を登録する

1. **「🗂 店舗」タブ**を開く
2. 右下の **＋ボタン** をタップ
3. 店舗名を入力
4. **ブラウザ版Googleマップ**で店舗を検索し、**アドレスバーのURL**をコピーして貼り付け
   → 緯度・経度が自動入力される ✅
5. 「保存する」をタップ

#### 座標の入力方法は3通りあります

| 方法 | 向いている場面 |
|------|--------------|
| ブラウザ版GoogleマップのURLを貼り付け（推奨） | 自宅でまとめて登録したいとき |
| 「📍 現在地の座標を使う」ボタン | 今まさにいる店舗をその場で登録したいとき |
| 緯度・経度を手動入力 | 座標がわかっている場合 |

> **💡 座標は任意です。** 座標がなくても店舗の登録・チェックイン/チェックアウトは問題なく使えます。座標を登録しておくとGPS取得時に距離順で並び替えられるようになります。

#### GoogleマップのURLのコピー方法

> ⚠️ **Googleマップアプリの「共有」からコピーしたURLは短縮URL（maps.app.goo.gl）のため、座標を取得できません。** 必ずブラウザ版Googleマップのアドレスバーからコピーしてください。

**PCの場合**
```
ブラウザで https://www.google.com/maps を開く
        ↓
店舗名を検索
        ↓
アドレスバーのURLをコピー（@35.xxx,135.xxx のような座標が含まれています）
        ↓
アプリのURL欄に貼り付け → 座標が自動入力 ✅
```

**スマホの場合**
```
Safari / Chromeで https://www.google.com/maps を開く
        ↓
店舗名を検索
        ↓
アドレスバーをタップしてURLを全選択 → コピー
        ↓
アプリのURL欄に貼り付け → 座標が自動入力 ✅
```

> **💡 ヒント：** スマホでGoogleマップを検索するとアプリが自動的に開いてしまう場合は、URLを長押しして「新しいタブで開く」を選ぶとブラウザ内で開けます。

#### 「📍 現在地の座標を使う」ボタンについて

店舗の追加・編集画面にある「📍 現在地の座標を使う」ボタンをタップすると、その場でGPSから現在地を取得して緯度・経度を自動入力します。ホーム画面で事前に現在地を取得する必要はありません。

---

### STEP 2 — せどりを開始する

1. **「🏠 ホーム」タブ**を開く
2. 必要に応じて **「現在地を取得（距離順ソート）」** をタップ（任意）
3. 最初に向かう店舗の **「この店舗を選択」** をタップ（任意）
4. **「▶ 店舗せどり開始」** をタップ → 確認ダイアログで「開始する」

> 店舗を選択した場合、最初の店舗に自動チェックインされます  
> **選択なしで開始することも可能です**（自宅出発時にタイマーだけ先に起動し、店舗到着後にチェックインする使い方が自然です）

---

### STEP 3 — チェックイン / チェックアウト

#### チェックイン
店舗に到着したら、店舗カードの **「チェックイン」** ボタンをタップ

> タイミングは「駐車場に着いたとき」でも「店内に入ったとき」でも構いません。毎回同じタイミングで行うことで記録の一貫性が保たれます

#### チェックアウト
その店舗でのせどりが終わったら **「チェックアウト」** ボタンをタップ  
→ 滞在時間が自動記録されます

#### 排他チェックイン
いずれかの店舗にチェックイン中は、他の店舗のチェックインボタンは無効になります（「他の店舗に滞在中」と表示されます）。チェックアウトすると他の店舗にチェックインできるようになります。

#### はしご対応
チェックアウト後、次の店舗へ移動して再びチェックインできます。  
店舗せどり中は何店舗でもチェックイン/アウトを繰り返せます。

---

### STEP 4 — 帰宅したら店舗せどりを終了する

**「■ 店舗せどり終了」** をタップ → 確認ダイアログで「終了する」

チェックイン中の店舗がある場合、自動でチェックアウトされます。

---

### 📊 統計を確認する

**「📊 統計」タブ**を開くと、店舗せどり記録が表示されます。

| 指標 | 説明 |
|------|------|
| 総稼働時間 | 店舗せどり開始〜終了の合計時間 |
| 訪問店舗数 | その日チェックインした店舗の数 |
| 店舗滞在合計 | 各店舗の滞在時間を合計したもの |
| 移動＋休憩時間 | 総稼働時間 − 店舗滞在合計 |

各日付をタップすると、訪問店舗ごとの詳細が展開されます。

---

### 📈 店舗別の履歴を確認する

**「🗂 店舗」タブ**で各店舗の **📈ボタン** をタップすると：

- 平均滞在時間・最短滞在時間
- 滞在時間の推移グラフ（棒グラフ）
- 傾向（📉 短縮中 / 📈 増加中 / ➡ 横ばい）
- 全訪問履歴の一覧

> 棒グラフの緑の棒が直近の訪問です。棒が短くなってきたら効率化できている証拠です 🎉

---

### 🗑 記録を削除する

#### 訪問履歴の削除
**「📋 履歴」タブ**で各記録の右端にある **🗑ボタン** をタップ  
→ 確認ダイアログが表示されるので「削除する」をタップ

#### 店舗せどり記録の削除
**「📊 統計」タブ**でセッションを展開 → **「🗑 この記録を削除」** をタップ  
→ セッションと紐づく訪問履歴がまとめて削除されます

> 💡 誤ってタイマーを起動した場合やテスト記録の削除に便利です

#### 店舗の削除
**「🗂 店舗」タブ**で店舗の **🗑️ボタン** をタップ  
訪問履歴がある店舗の場合、以下の選択肢が表示されます：

- **「店舗だけ削除（履歴は残す）」** — 店舗マスタのみ削除。統計の整合性が保たれます
- **「店舗と履歴をすべて削除」** — 店舗とその店舗に関する訪問履歴をまとめて削除

---

## 📲 ホーム画面に追加する（アプリとして使う）

スマホのブラウザでアプリを開いた後、以下の手順でホーム画面に追加できます。

**iPhoneの場合（Safari）**
1. 画面下部の **共有ボタン**（□↑）をタップ
2. **「ホーム画面に追加」** をタップ
3. 「追加」をタップ

**Androidの場合（Chrome）**
1. 右上の **︙メニュー** をタップ
2. **「ホーム画面に追加」** をタップ

ホーム画面のアイコンからアプリのように起動できます。

---

## 🔒 プライバシーについて

すべての訪問履歴・店舗データはあなたのスマホ（ブラウザのlocalStorage）に保存されます。

**外部通信について**
- 本アプリは外部サーバーへのデータ送信を一切行いません
- バックアップ・復元のエクスポート/インポート機能はすべてローカルで完結します

ソースコードはこのリポジトリで公開しており、HTMLファイルを直接確認することで動作を検証できます。

> ⚠️ **注意：** ブラウザのキャッシュ削除・スマホの初期化・機種変更を行うとデータが消えます。定期的に「💾 データ」タブからエクスポートしてバックアップを取ることをおすすめします。

---

## 💾 バックアップ・データ移行

> ⚠️ ブラウザのキャッシュ削除やスマホの初期化でデータが消えます。定期的なバックアップを推奨します。

### バックアップ（エクスポート）

1. **「💾 データ」タブ**を開く
2. **「エクスポートする」** をタップ
3. シェアシートが開くので保存先を選ぶ（Googleドライブ・Dropbox・iCloud等）

### 復元・機種変更（インポート）

1. **「💾 データ」タブ**を開く
2. **「インポートする」** をタップ
3. ファイルピッカーが開くので、以前保存したJSONファイルを選ぶ
4. インポート完了のトーストが表示され、件数が確認できる

> **💡 ヒント：** インポートは上書きではなく**追加**です。既存データと重複する記録はスキップされるので、同じファイルを何度インポートしても問題ありません。

> **💡 iPhoneの場合：** 「インポートする」をタップすると「ファイル」アプリが開きます。左上の「ブラウズ」からGoogleドライブ・Dropbox等を選択できます（各アプリのインストールが必要です）。

### 機種変更の流れ

```
旧スマホ：「データ」タブ → エクスポート → Googleドライブ等に保存
        ↓
新スマホ：アプリを開く → 「データ」タブ → インポート → Googleドライブから選択 ✅
```

---

## 🛠 技術仕様

| 項目 | 内容 |
|------|------|
| 構成 | シングルHTMLファイル |
| データ保存 | ブラウザ localStorage |
| 外部依存 | Google Fonts（Orbitron・Outfit・Noto Sans JP）のみ |
| 対応ブラウザ | iOS Safari 14+ / Android Chrome 90+ / PC各種モダンブラウザ |

---

## 📄 ライセンス

MIT License — 自由に使用・改変・再配布できます。

---

*ご意見・バグ報告は [Issues](https://github.com/i-love-hamster/sedori-tracker/issues) までお願いします*
